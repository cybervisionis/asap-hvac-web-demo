<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Plans - ASAP HVAC</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="logo"><img src="images/logo.svg" alt="ASAP HVAC" style="height: 50px;"></a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="plans.html">Maintenance Plans</a></li>
                    <li><a href="admin/dashboard.html">Admin</a></li>
                    <li><a href="quote.html" class="btn btn-primary">Request Quote</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="section">
        <div class="container text-center">
            <h1>Maintenance Plans <span class="demo-badge">DEMO</span></h1>
            <p style="max-width: 700px; margin: 1rem auto;">Keep your system running efficiently. Save on repairs and extend equipment life with regular tune-ups.</p>
            <div id="plans-grid" class="plan-grid mt-2"></div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 ASAP HVAC â€“ Licensed & Insured <span class="demo-badge">DEMO</span></p>
        </div>
    </footer>

    <script src="js/app.js"></script>
    <script>
        loadData().then(() => {
            const plansGrid = document.getElementById('plans-grid');
            if (!plansGrid || !appData.maintenancePlans) return;

            const planDescriptions = {
                Basic: 'Entry-level tune-ups to keep essentials covered and prevent surprise breakdowns.',
                Plus: 'Add deeper cleaning plus faster response windows for high-demand seasons.',
                Premium: 'Full concierge care with IAQ monitoring, emergency access, and priority installs.'
            };

            const recommendedPlanId = 'plan-plus';
            const checkIcon = '<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>';

            plansGrid.innerHTML = appData.maintenancePlans.map(plan => {
                const features = [
                    ...plan.includedServices,
                    `${plan.partsDiscountPct}% parts discount`,
                    ...plan.extras
                ];
                return `
                    <div class="plan-card ${plan.id === recommendedPlanId ? 'recommended' : ''}">
                        <h3>${plan.planTier}</h3>
                        <div class="plan-price">$${plan.annualFee}<span style="font-size: 0.75rem; font-weight: 500; color: var(--gray);">/yr</span></div>
                        <p class="plan-description">${plan.description || planDescriptions[plan.planTier] || ''}</p>
                        <ul class="plan-features">
                            ${features.map(item => `<li>${checkIcon}<span>${item}</span></li>`).join('')}
                        </ul>
                        <button class="btn-enroll" data-plan="${plan.id}">Enroll Now</button>
                    </div>
                `;
            }).join('');

            plansGrid.addEventListener('click', (event) => {
                if (event.target.matches('.btn-enroll')) {
                    const planId = event.target.getAttribute('data-plan');
                    window.location.href = `quote.html?plan=${planId}`;
                }
            });
        });
    </script>
</body>
</html>
